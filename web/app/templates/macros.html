{% macro breadCrumbMacro(rows, current) %}
    <br>

    <nav class="breadcrumb is-centered" aria-label="breadcrumbs">
      <ul>
        {% for row in rows %}
            <li><a href={{ row.href }}>{{ row.name }}</a></li>
        {% endfor %}
        <li class="is-active"><a href="#" aria-current="page">{{ current }}</a></li>
      </ul>
    </nav>

{% endmacro %}

{% macro patientInfoMacro(patientInfo) %}
        <h4 class="title is-4">Datos del paciente</h4>

        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b> Nombre</b>:&nbsp;&nbsp; {{ patientInfo.name }}
        <br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b> Primer apellido</b>:&nbsp;&nbsp; {{ patientInfo.surname1 }}
        <br>
        <b> Segundo apellido</b>:&nbsp;&nbsp; {{ patientInfo.surname2 }}
        <br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b> Edad </b>:&nbsp;&nbsp; {{ patientInfo.age }}
        <br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b> Género </b>:&nbsp;&nbsp; 
        {% if patientInfo.gender == "M" %}
            <td align="center">Masculino</td>
        {% else %}
            <td align="center">Femenino</td>
        {% endif %}

{% endmacro %}

{% macro insertPatternMacro(form) %}
    <section class="accordions" id="newPatt">
        <article class="accordion is-active">
            <div class="accordion-header toggle">
              Añadir una nueva pauta para el paciente actual
              <button class="toggle" aria-label="toggle"></button>
            </div>
            <div class="accordion-body">
                <div class="accordion-content">
                    <div class="columns is-vcentered is-centered" style="margin-top:50px">
                        <div class="column is-1">
                        </div>

                        <div class="column is-8 box">

                            <div align="center">
                                <h4 class="title is-4">Añadir pauta</h4>
                                <form action="" id="generalForm2" method="post" novalidate onSubmit="submitFunc()">
                                    {{ form.hidden_tag() }}
                                    {{ form.csrf_token }}

                                    <div class="columns is-vcentered is-centered" style="margin-top:50px">
                                        <div class="column is-2">
                                        </div>
                                        <div class="column is-8">
                                            <p>
                                                <b>{{ form.patternName.label }}</b> {{ form.patternName(size=5, maxlength=15) }}
                                                
                                                {% for error in form.patternName.errors %}
                                                <span style="color: red;">[{{ error }}]</span>
                                                {% endfor %}
                                            </p>
                                        </div>
                                        <div class="column is-2">
                                        </div>
                                    </div>

                                    <br>
                                        
                                    <b>{{ form.patternDescription.label }}</b> <br>
                                    {{ form.patternDescription(maxlength=50) }} 

                                    <br>
                                    <b>{{ form.patternIntensity1.label }}</b> &nbsp;&nbsp; {{ form.patternIntensity1 }}
                                    <br>
                                    <b>{{ form.patternIntensity2.label }}</b> &nbsp;&nbsp; {{ form.patternIntensity2 }}
                                    <br>
                                    <b>{{ form.patternIntensity3.label }}</b> &nbsp;&nbsp; {{ form.patternIntensity3 }}
                                    <br>
                                    <br>
                                    {{ form.patternSubmit }}

                                </form>
                            </div>

                            <br>

                        </div>


                        <div class="column is-1">
                        </div>
                    </div>
                </div>
            </div>
        </article>
    </section>
{% endmacro %}

{% macro patternsTableMacro(rows, edit, unlink) %}
    <table class="table" id="tablePatterns">
        <thead>
            {% if edit == 1 %}
                <th align="center"> <span> Seleccionar </span></th>
            {% endif %}
            <th align="center"> <span> Nombre </span></th>
            <th align="center"> <span> Intensidad amarilla </span></th>
            <th align="center"> <span> Intensidad naranja </span></th>
            <th align="center"> <span> Intensidad roja </span></th>
            <th align="center"> <span>  </span></th>
            {% if unlink > 0 %}
                <th align="center"> <span>  </span></th>
            {% endif %}

        </thead>
        <tbody>
            {% for row in rows %}
                <tr>
                    {% if edit == 1 %}
                        <td align="center"> <input type="checkbox" name="checkboxPattPat" id="checkbox_{{row.id}}"> </td>
                    {% endif %}

                    <td align="center">{{ row.name }}</td>

                    {% if row.intensity1=="No" %}
                        <td align="center"><span style='color:red;'><i class='fas fa-times'></i></span></td>
                    {% else %}
                        <td align="center"><span style='color:green;'><i class='fas fa-check'></i></span></td>
                    {% endif %}

                    {% if row.intensity2=="No" %}
                        <td align="center"><span style='color:red;'><i class='fas fa-times'></i></span></td>
                    {% else %}
                        <td align="center"><span style='color:green;'><i class='fas fa-check'></i></span></td>
                    {% endif %}

                    {% if row.intensity3=="No" %}
                        <td align="center"><span style='color:red;'><i class='fas fa-times'></i></span></td>
                    {% else %}
                        <td align="center"><span style='color:green;'><i class='fas fa-check'></i></span></td>
                    {% endif %}
                    <td align="center"><a href=/verPauta/{{ row.id }}><i class='fas fa-eye'></i> &nbsp; Ver </a> </td>
                    {% if unlink == 1 %}
                        <td align="center"><a onclick="unlinkPattern({{ row.id }});"><i class='fas fa-unlink'></i> &nbsp; Desvincular </a> </td>
                    {% elif unlink == 2 %}
                        <td align="center"><a onclick="displayModalDelete('{{ row.id }}', '{{ row.name }}')" style="color:firebrick"><i class='fas fa-trash'></i> &nbsp; Eliminar </a> </td>
                    {% endif %}
                </tr>
            {% endfor %}                                    
        </tbody>
    </table>
{% endmacro %}

{% macro patientsTableMacro(rows, edit) %}
    <div id="tablearea">
    <!--<h4 class="title is-4 is-spaced">Pacientes asociados</h4>-->
        <table class="table" id="tablePatients">
            <thead>
                {% if edit == 3 %}
                    <th align="center"> <span> Seleccionar </span></th>
                {% endif %}
                <th align="center"> <span> Nombre </span></th>
                <th align="center"> <span> Primer apellido </span></th>
                <th align="center"> <span> Segundo apellido </span></th>
                <th align="center"> <span> Género </span></th>
                <th align="center"> <span> Edad </span></th>
                <th align="center"> <span>  </span></th>
                {% if edit > 0 %}
                    <th align="center"> <span>  </span></th>
                {% endif %}
            </thead>
            
            <tbody>
            {% for row in rows %}
                <tr>
                    {% if edit == 3 %}
                        <td align="center"> <input type="checkbox" name="checkboxPattPat" id="checkbox_{{row.id}}"> </td>
                    {% endif %}
                    <td align="center">{{ row.name }}</td>
                    <td align="center">{{ row.surname1 }}</td>
                    <td align="center">{{ row.surname2 }}</td>
                    {% if row.gender=="M" %}
                        <td align="center"><i class='fas fa-mars'></i> &nbsp; Masculino</td>
                    {% else %}
                        <td align="center"><i class='fas fa-venus'></i> &nbsp; Femenino</td>
                    {% endif %}
                    <td align="center">{{ row.age }}</td>
                    <td align="center"><a href=/verPaciente/{{ row.id }}><i class='fas fa-eye'></i> &nbsp; Ver </a> </td>
                    {% if edit == 1 %}
                        <td align="center"><a onclick="displayModalDelete('{{ row.id }}', '{{ row.name }}', '{{ row.surname1 }}', '{{ row.surname2 }}')" style="color:firebrick"><i class='fas fa-trash'></i> &nbsp; Eliminar </a> </td>
                    {% elif edit == 2 %}
                        <td align="center"><a onclick="unlinkPatient({{ row.id }});"><i class='fas fa-unlink'></i> &nbsp; Desvincular </a> </td>
                    {% endif %}
                </tr>
            {% endfor %}
            </tbody>                 
        </table>

    </div>
{% endmacro %}

{% macro groupsTableMacro(rows, edit) %}
    <div id="idTable">

        <table class="table" id="tableGroups">
            <thead>
                {% if edit == 3 %}
                    <th align="center"> <span> Seleccionar </span></th>
                {% endif %}            
                <th align="center"> <span> Nombre </span></th>
                <th align="center"> <span>  </span></th>
                {% if edit > 0 %}
                    <th align="center"> <span>  </span></th>
                {% endif %}                
            </thead>
            <tbody>
                {% for row in rows %}
                    <tr>
                        {% if edit == 3 %}
                            <td align="center"> <input type="checkbox" name="checkboxPattPat" id="checkbox_{{row.id}}"> </td>
                        {% endif %}                    
                        <td align="center">{{ row.name }}</td>
                        <td align="center"><a href=/verGrupo/{{ row.id }}><i class='fas fa-eye'></i> &nbsp; Ver </a> </td>
                        {% if edit == 1 %}
                             <td align="center"><a onclick="displayModalDelete('{{ row.id }}', '{{ row.name }}')" style="color:firebrick"><i class='fas fa-trash'></i> &nbsp; Eliminar </a> </td>
                        {% elif edit == 2 %}
                            <td align="center"><a onclick="unlinkGroup({{ row.id }});"><i class='fas fa-unlink'></i> &nbsp; Desvincular </a> </td>
                        {% endif %}                        
                    </tr>
                {% endfor %}
            </tbody>                 
        </table>
    </div>
{% endmacro %}


{% macro episodesTableMacro(rows, patientId) %}
    <div id="idTable">

        <table class="table">
            <thead>
                <th align="center"> <span> Fecha de inicio </span></th>
                <th align="center"> <span> Hora de inicio </span></th>
                <th align="center"> <span> Hora de fin </span></th>
                <th align="center"> <span> Duración </span></th>
                <th align="center"> <span> Causa </span></th>
                <th align="center"> <span>  </span></th>
            </thead>
            <tbody>
                {% for row in rows %}
                    <tr>
                        <td align="center">{{ row.firstDate }}</td>
                        <td align="center">{{ row.firstTime }}</td>
                        <td align="center">{{ row.lastTime }}</td>
                        <td align="center">{{ row.duration }}</td>
                        <td align="center">{{ row.cause }}</td>
                        <td align="center"><a href=/verUnEpisodio?idPatient={{ patientId }}&timestampFrom={{ row.timestampFrom }}&timestampTo={{ row.timestampTo }}><i class='fas fa-eye'></i>Ver</a> </td>
                    </tr>
                {% endfor %}
            <tbody>                 
        </table>
    </div>
{% endmacro %}

{% macro oneEpisodeTableMacro(rows) %}
    <div id="idTable">

        <table class="table">
            <thead>
                <th align="center"> <span> Fecha </span></th>
                <th align="center"> <span> Hora </span></th>
                <th align="center"> <span> Nivel de alerta </span></th>
                <th align="center"> <span> Pauta sugerida </span></th>
                <th align="center"> <span> Descartada </span></th>
                <th align="center"> <span> Comentarios </span></th>
            </thead>
            <tbody>
                {% for row in rows %}
                    {% if row.alertLevel > 0 %}
                        <tr>
                            <td align="center">{{ row.date }}</td>
                            <td align="center">{{ row.time }}</td>
                            {% if row.alertLevel == 1 %}
                                <td align="center">Amarillo</td>
                            {% elif row.alertLevel == 2 %}
                                <td align="center">Naranja</td>
                            {% elif row.alertLevel == 3 %}
                                <td align="center">Rojo</td>
                            {% endif %}
                            <td align="center">Nombre de la pauta</td>
                            <td align="center">Sí</td>
                            <td align="center">Esta pauta no me sirvió</td>
                        </tr>
                    {% endif %}
                {% endfor %}
            <tbody>                 
        </table>
    </div>
{% endmacro %}


{% macro titleMacro(title) %}
    <div class="container">
        <div class="title-wrapper has-text-centered">
            <h2 class="title is-2 is-spaced">{{ title }}</h2>

            <hr width="32%" style="margin-left: 34%"/>
        </div>
    </div>
{% endmacro %}


<!-- Modals -->

<!-- Modal[Save] -->
{% macro modalSaveMacro(objType) %}
    <div class="modal" id="page-modal-save">
        <div class="modal-background" onclick="closeModalSave()"></div>
        <div class="modal-content box" style="background-color:#A9A9A9;width:800px;height:150px;top:30%;border-style:solid" align="center">
            <br>
            <span> <b>Por favor, confirma si quieres modificar los datos {{ objType }} </b></span><br><br>
            <button class="button is-primary" onclick="confirmSave();">Confirmar</button>
            <button class="button is-warning" onclick="closeModalSave()">Volver</button>
        </div>
        <button class="modal-close is-large" aria-label="close" onclick="closeModalSave()"></button>
    </div>
{% endmacro %}

<!-- Modal[Cancel] -->
{% macro modalCancelMacro(objType) %}
    <div class="modal" id="page-modal-cancel">
        <div class="modal-background" onclick="closeModalCancel()"></div>
        <div class="modal-content box" style="background-color:#A9A9A9;width:800px;height:150px;top:30%;border-style:solid" align="center">
            <br>
            <span> <b>Los datos que no hayan sigo guardados se perderán. Por favor, confirma si quieres realizar esta acción </b></span><br><br>
            <button class="button is-primary" onclick="window.location.href = '/';">Confirmar</button>
            <button class="button is-warning" onclick="closeModalCancel()">Volver</button>
        </div>
        <button class="modal-close is-large" aria-label="close" onclick="closeModalCancel()"></button>
    </div>
{% endmacro %}

<!-- Modal[Delete] -->
{% macro modalDeleteMacro(objType) %}
    <div class="modal" id="page-modal-delete">
        <div class="modal-background" onclick="closeModalDelete()"></div>
        <div class="modal-content box" style="background-color:#A9A9A9;width:800px;height:200px;top:30%;border-style:solid" align="center">
            <br>
            <font size="5"> <b>¿Estás seguro que quieres borrar todos los datos {{ objType }}? </b></font><br>
            <span id ="textDeleteMacro"></span><br>
            <button class="button is-primary" onclick="confirmDeleteMacro();">Confirmar</button>
            <button class="button is-warning" onclick="closeModalDelete()">Cancelar</button>
        </div>
        <button class="modal-close is-large" aria-label="close" onclick="closeModalDelete()"></button>
    </div>
{% endmacro %}


{% macro patientInfoMacro(patientInfo) %}
    <div align="center">
        <h4 class="title is-4">Datos del paciente</h4>

        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b> Nombre</b>:&nbsp;&nbsp; {{ patientInfo.name }}
        <br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b> Primer apellido</b>:&nbsp;&nbsp; {{ patientInfo.surname1 }}
        <br>
        <b> Segundo apellido</b>:&nbsp;&nbsp; {{ patientInfo.surname2 }}
        <br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b> Edad </b>:&nbsp;&nbsp; {{ patientInfo.age }}
        <br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b> Género </b>:&nbsp;&nbsp; 
        {% if patientInfo.gender == "M" %}
            <td align="center">Masculino</td>
        {% else %}
            <td align="center">Femenino</td>
        {% endif %}

    </div>
{% endmacro %}

{% macro groupInfoMacro(groupInfo) %}
    <div align="center">
        <h4 class="title is-4">Datos del grupo</h4>

        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b> Nombre</b>:&nbsp;&nbsp; {{ groupInfo.name }}
        <br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b> Descripción</b>:&nbsp;&nbsp; {{ groupInfo.description }}

    </div>
{% endmacro %}